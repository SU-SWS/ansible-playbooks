---
# Ansible role for creating a site on ACE.
# https://github.com/SU-SWS/ansible-playbooks
# =================================================
#
# The purpose of this role is to instantiate a STATE, in this case the
# existence of a vhost for a site in ACE.
#
# INPUTS:
#   acquia_api_key
#   acquia_username
#   new_absolute_path
#   site_id
#   site_environment
#   sites_service
#
# OUTPUTS:
# --
#
# ALTERNATIVE ROLES:
# --
#
# REQUIREMENTS:
# --
#
# KNOWN ISSUES:
# --

- name: Add sites-pro dev domain
  shell: "drush @stanfordpro.dev ac-domain-add {{ inventory_hostname }}-dev.sites-pro.stanford.edu"

- name: Add sites-pro test domain
  shell: "drush @stanfordpro.test ac-domain-add {{ inventory_hostname }}-test.sites-pro.stanford.edu"

- name: Add sites-pro prod domain
  shell: "drush @stanfordpro.prod ac-domain-add {{ inventory_hostname }}.sites-pro.stanford.edu"

# We only do this for production sites with vhosts.
- name: Add custom domain
  shell: "drush @stanfordpro.prod ac-domain-add {{ new_absolute_path }}"
  when: new_absolute_path !== ""
